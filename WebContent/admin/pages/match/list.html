<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>比赛列表-Secretzq Frame型后台管理系统-Secretzq 1.0</title>
		<meta name="renderer" content="webkit" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0" />
		<link rel="stylesheet" href="../../static/css/font.css" />
		<link rel="stylesheet" href="../../static/css/weadmin.css" />
		<!-- 让IE8/9支持媒体查询，从而兼容栅格 -->
		<!--[if lt IE 9]>
		  <script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
		  <script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
		<![endif]-->
	</head>

	<body>
		<div class="weadmin-nav">
			<span class="layui-breadcrumb">
				<a href="javascript:;">首页</a> <a href="javascript:;">比赛管理</a>
				<a href="javascript:;"> <cite>比赛列表</cite></a>
			</span>
			<a class="layui-btn layui-btn-sm" style="margin-top:3px;float:right" href="javascript:location.replace(location.href);"
			 title="刷新">
				<i class="layui-icon layui-icon-refresh"></i>
				<!-- <i class="layui-icon" style="line-height:30px">&#x1002;</i> -->
			</a>
		</div>

		<div class="weadmin-body">
			<div class="layui-row">
				<form class="layui-form layui-col-md12 we-search">
					会员搜索：
					<div class="layui-inline">
						<input class="layui-input" placeholder="开始日" name="start" id="start" />
					</div>
					<div class="layui-inline">
						<input class="layui-input" placeholder="截止日" name="end" id="end" />
					</div>
					<div class="layui-inline">
						<input type="text" name="teamName" placeholder="请输入球队名称" autocomplete="off" class="layui-input" />
					</div>
					<button class="layui-btn" lay-submit="" lay-filter="sreach">
						<i class="layui-icon layui-icon-search"></i>
					</button>
				</form>
			</div>
			<div class="weadmin-block">
				<span class="fr" style="line-height:40px">共有数据：<b id=totalnum>0</b>  条</span>
			</div>
			<table class="layui-table" id="memberList">
				<thead>
					<tr>
						<th rowspan=2>ID</th>
						<th rowspan=2>竞彩编号</th>
						<th rowspan=2>赛事</th>
						<th rowspan=2>主队</th>
						<th rowspan=2>客队</th>
						<th rowspan=2>比赛时间</th>
						<th rowspan=2>全场比分</th>
						<th rowspan=2>半场比分</th>
						<th rowspan=2>比赛状态</th>
						<th>赔率</th>
					</tr>
					<tr>
					<th>胜</th>
					<th>平</th>
					<th>负</th>
					</tr>
				</thead>
				<tbody id="datalist">
					
				</tbody>
			</table>
			<div class="page">
				
			</div>
		</div>
		<!--<script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>-->
		<script src="../../lib/layui/layui.js" charset="utf-8"></script>
		<script src="../../static/js/eleDel.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
		
		$(function() {// 初始化内容
			gotoPage(1);
		}
		function genPage(count,pageNo,pageSize){
			totalPage = (count+ pageSize-1) / pageSize;
			var html=[];
			html.push('<div>');
			if(pageNo > 1){
				html.push('<a class="prev" href="javascript:gotoPage('+(pageNo-1)+')">&lt;&lt;</a>');
			}
			html.push('<span class="current">'+pageNo+'</span>');
			if(pageNo < totalPage){
				html.push('<a class="num" href="javascript:gotoPage('+totalPage+')">'+totalPage+'</a>');
				html.push('<a class="next" href="javascript:gotoPage('+(pageNo+1)+')">&gt;&gt;</a>');
			}
			html.push('</div>');
			$(".page").html(html.join(""));;
		}
		function gotoPage(pageNo){
			var start = $("#start").val();
			var end = $("#end").val();
			var teamName = $("#teamName").val();
			var postData = {pageNo};
			if(start!=""){
				postData.start = start;
			}
			if(end!=""){
				postData.end = end;
			}
			if(teamName != ""){
				postData.teamName = teamName;
			}
			$.post("/adminS/matchlist",postData,function(result){
				result = JSON.parse(result);
				var count =result.count;
				var pageSize = result.pageSize;
				var pageNo = result.pageNo;
				$("#totalnum").text(count);
				if(count>0){
					var list = result.data;
					var html=[];
					for(var i=0;i<list.length;i++){
						html.push('<tr data-id="'+(i+1)+'">');
						html.push('<td>'+list[i].id+'</td>');
						html.push('<td>'+list[i].num+'</td>');
						html.push('<td>'+list[i].l_cn+'</td>');
						html.push('<td>'+list[i].h_cn+'</td>');
						html.push('<td>'+list[i].a_cn+'</td>');
						html.push('<td>'+list[i].playtime+'</td>');
						html.push('<td>'+list[i].fullscore+'</td>');
						html.push('<td>'+list[i].halfscore+'</td>');
						html.push('<td>'+list[i].match_status+'</td>');
						html.push('<td>'+list[i].h+'</td>');
						html.push('<td>'+list[i].d+'</td>');
						html.push('<td>'+list[i].a+'</td>');
						html.push('</tr>');
					}
					$("#datalist").html(html.join(''));
					genPage(count,pageNo,pageSize);
				}else{
					$("#datalist").html('<tr><td colspan=12>暂无数据</td></tr>');
				}
			});
		}
		</script>
	</body>
</html>
